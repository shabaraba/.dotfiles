{
  "adapters": {
    "python-remote": {
      "port": "${port}",
      "host": "${host}",
      "launch": {
        "remote": {
          "host": "${host}",
          "account": "${account}",
          "runCommands": [
              [
                "python", "-m", "debugpy",
                "--listen", "0.0.0.0:${port}",
                "--wait-for-client",
                "%CMD%"
              ]
          ]
        }
      },
      "attach": {
        "remote": {
          "host": "${host}",
          "account": "${account}",
          "pidCommand": [
            "/path/to/secret/script/GetPIDForService", "${ServiceName}"
          ],
          "attachCommands": [
              [
                "python", "-m", "debugpy", "--listen", "0.0.0.0:${port}",
                "--pid", "%PID%"
              ]
          ]
        }
      }
    },
    "python-docker": {
      "port": "${port}",
      "launch": {
        "remote": {
          "container": "${container}",
          "runCommands": [
              [
                "python", "-m", "debugpy",
                "--listen", "0.0.0.0:${port}",
                "--wait-for-client",
                "%CMD%"
              ]
          ]
        }
      },
      "attach": {
        "remote": {
          "container": "${container}",
          "pidCommand": [
            "sh", "-c", "pgrep", "-f", "${filename}"
          ],
          "attachCommands": [
              [
                "sh", "-c", "python", "-m", "debugpy", "--listen", "0.0.0.0:${port}",
                "--pid", "%PID%"
              ]
          ]
        }
      }
    }
  },
  "configurations": {
    "python-remote-launch": {
      "adapter": "python-remote",

      "remote-request": "launch",
      "remote-cmdLine": [
        "${RemoteRoot}/${fileBasename}", "*${args}"
      ],

      "configuration": {
        "request": "attach",
        "pathMappings": [
          {
            "localRoot": "${workspaceRoot}",
            "remoteRoot": "${RemoteRoot}"
          }
        ]
      }
    },
    "python-remote-attach": {
      "variables": {
        "ServiceName": "${fileBasenameNoExtention}"
      },

      "adapter": "python-remote",
      "remote-request": "attach",

      "configuration": {
        "request": "attach",
        "pathMappings": [
          {
            "localRoot": "${workspaceRoot}",
            "remoteRoot": "${RemoteRoot}"
          }
        ]
      }
    },
    "python-run-file": {
      "adapter": "debugpy",
      "configuration": {
        "name": "Python: Launch",
        "type": "python",
        "request": "launch",
        "stopOnEntry": true,
        "console": "externalTerminal",
        "debugOptions": [],
        "program": "${file}"
      }
    },
    "python-docker-launch": {
      "adapter": "python-docker",
      "remote-request": "launch",
      "remote-cmdLine": [
        "${RemoteRoot}/${fileBasename}", "*${args}"
      ],
      "configuration": {
        "request": "attach",
        "pathMappings": [
          {
            "localRoot": "${workspaceRoot}",
            "remoteRoot": "${RemoteRoot}"
          }
        ]
      }
    },
    "python-docker-attach": {
      "variables": {
        "FileName": "${fileName}"
      },
      "adapter": "python-docker",
      "remote-request": "attach",
      "configuration": {
        "request": "attach",
        "pathMappings": [
          {
            "localRoot": "${workspaceRoot}",
            "remoteRoot": "${RemoteRoot}"
          }
        ]
      }
    },
    "Listen for XDebug": {
      "adapter": "vscode-php-debug",
      "configuration": {
        "name": "Listen for XDebug",
        "type": "php",
        "request": "launch",
        "port": 9000,
        "stopOnEntry": false,
        "pathMappings": {
          "/var/www/html": "${workspaceRoot}"
        }
      }
    },
    "Launch currently open script": {
      "adapter": "vscode-php-debug",
      "configuration": {
        "name": "Launch currently open script",
        "type": "php",
        "request": "launch",
        "program": "${file}",
        "cwd": "${fileDirname}",
        "port": 9000
      }
    }
  }  
}
