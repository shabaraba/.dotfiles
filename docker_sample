version: "3.7"
services:
    #  nginx:
    #  container_name: nginx
    #  image: nginx:1.17.2-alpine
    #  ports:
    #    - "80:80"
    #  volumes:
    #    - ./src:/var/www/html:cached
    #    - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf:cached
    #  links:
    #    - php
    #  depends_on:
    #    - php
  php:
    container_name: php
    build:
      context: ./docker/php
      dockerfile: Dockerfile
      args:
          USER_NAME: docker
    tty: true
    ports:
      - 5500:8000
    volumes:
      - .:/var/www/html:cached
      - ./docker/php/user_root:/home/docker:cached
    working_dir: /var/www/html
  mysql:
      image: mysql:5.7
      container_name: mysql_host
      environment:
        MYSQL_ROOT_PASSWORD: root
        MYSQL_DATABASE: mysql
        MYSQL_USER: mysql
        MYSQL_PASSWORD: mysql
        TZ: 'Asia/Tokyo'
      command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
      volumes:
          - ./docker/mysql/data:/var/lib/mysql
          - ./docker/mysql/my.cnf:/etc/mysql/conf.d/my.cnf
          - ./docker/mysql/sql:/docker-entrypoint-initdb.d
      stop_grace_period: 1m
    #  composer:
    #container_name: composer
    #build:
    #  context: ./docker/composer
    #  dockerfile: Dockerfile
    #volumes:
    #  - ./src:/src
    #working_dir: /src
    #  node:
    #image: node:11.8.0
    #container_name: node
    #ports:
    #  - 8080:8080
    #volumes:
    #  - ./src:/src
    #working_dir: /src
